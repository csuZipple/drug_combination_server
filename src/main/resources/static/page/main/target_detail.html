<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="DrugCombDB is devoted to the research and development of multi-component drugs.">
    <meta name="author" content="zipple">
    <meta name="keywords" content="drug,combination,database">
    <title>DrugCombDB - the drug combination database</title>
    <link href="../../resource/css/reset.css" type="text/css" rel="stylesheet"/>
    <link href="../../resource/css/style.css" type="text/css" rel="stylesheet"/>
    <link href="../../resource/css/dcdb.css" type="text/css" rel="stylesheet"/>
    <!-- @media query -->
</head>
<body>
    <header>
        <a href="main.html" class="zl_logo">DrugCombDB</a>
        <div class="zl_tabs">
            <a  href="main.html">home</a>
            <a href="browser.html">browser</a>
            <a href="tutorial.html">tutorial</a>
            <a href="download.html">download</a>
            <div class="zl_drop_down">contact</div>
        </div>

        <div class="zl_search_wrapper">
            <input type="text" title="" placeholder="Search drugs or other..."/>
            <img src="../../resource/images/icon/search.png" alt="search">

            <div class="zl_search_tips">
                <ul>
                    <li>This is tips placeholder</li>
                </ul>
            </div>
        </div>
    </header>
    <section class="zl_page zl_individual_drug_page">
       <!--the target detail-->
        <main>
            <div id="zl_target_container" style="width: 80%;height: 550px;"></div>
        </main>
    </section>

    <footer>
        <div class="bottom-info">
            <div>Copyright &copy; 2018 CSU. All Rights Reserved. </div>
            <div>DrugCombDB</div>
        </div>
    </footer>

<!--  about dialog  -->
    <div class="zl_contact_dialog">
        <h3>Get in touch with us</h3>
        <div class="zl_form_row">
            <div class="zl_input">
                <p>First Name:</p>
                <input type="text" title="">
            </div>

            <div class="zl_input">
                <p>Last Name:</p>
                <input type="text" title="">
            </div>
        </div>

        <div class="zl_form_row">
            <div class="zl_input">
                <p>Your Email:</p>
                <input type="text" title="">
            </div>
        </div>

        <div class="zl_form_row">
            <div class="zl_input zl_full_row">
                <p>How can we help?</p>
                <textarea name="" id="" cols="30" rows="5" title="" placeholder="All comments and suggestions are welcome."></textarea>
            </div>
        </div>


        <div class="zl_form_row">
            <div class="zl_input">
                <button class="zl_btn zl_submit_btn" onclick="onSubmit()">Submit</button>
            </div>
        </div>
    </div>

</body>
<script src="../../resource/js/jquery.js"></script>
<script type="text/javascript" src="../../resource/js/echarts.min.js"></script>
<script type="text/javascript" src="../../resource/js/base.js"></script>
<script>
    let dom = document.getElementById("zl_target_container");
    let myChart = echarts.init(dom);
    myChart.showLoading();
    let json={};
    $.get(rootUrl+'/target/drug/Vemurafenib').done(function (data) {
        //update option.
        myChart.hideLoading();
        json = normalizeJson(data);
        console.log(json);
        myChart.setOption({
            title:{
                text:"The Vemurafenib's Target "
            },
            tooltip: {
                trigger: 'item',
                triggerOn: 'mousemove'
            },
            series:[
                {
                    type: 'tree',

                    data: [json],

                    left: '2%',
                    right: '2%',
                    top: '8%',
                    bottom: '20%',

                    symbol: 'emptyCircle',

                    orient: 'vertical',

                    expandAndCollapse: true,

                    label: {
                        normal: {
                            position: 'left',
                            verticalAlign: 'middle',
                            align: 'right',
                        }
                    },

                    leaves: {
                        label: {
                            normal: {
                                position: 'right',
                                verticalAlign: 'middle',
                                align: 'left'
                            }
                        }
                    },

                    animationDurationUpdate: 750
                }
            ]
        })
    });

    function normalizeJson(data) {
        let json ={};
        json.name=data.drug;
        json.children=[];
        $.each(data.data,function (index, ele) {
            let obj ={"name":ele.protein,"value":ele.combinedScore};
            json.children.push(obj);
        });
        return json;
    }



</script>
</html>